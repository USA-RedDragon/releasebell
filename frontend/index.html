<html>
<head>
    <title> Release Bell </title>

    <link rel="stylesheet" href="/css/theme-chalk.css">
    <link rel="stylesheet" href="/css/index.css">

    <script src="/js/vue.js"></script>
    <script src="/js/element-ui.js"></script>
    <script src="/js/superagent.js"></script>

</head>
<body>

<el-container id="app">
  <el-header>
    <el-menu :default-active="activeView" class="el-menu-demo" mode="horizontal" @select="handleViewSelect">
      <el-menu-item index="releases"><i class="el-icon-bell"></i> Release Bell</el-menu-item>
      <el-menu-item index="projects" v-show="profile">Projects</el-menu-item>
      <el-menu-item index="profile" v-show="profile">Profile</el-menu-item>
      <el-menu-item index="logout" v-show="profile" style="float: right" @click="onLogout">Logout</el-menu-item>
    </el-menu>
  </el-header>
  <el-main>
    <div v-if="activeView === 'login'">
      <el-row type="flex" class="row-bg" justify="center">
        <el-col :span="6">
          <el-form ref="form" :model="login" label-position="top" @submit.native.prevent>
            <el-form-item label="Username"><el-input v-model="login.username" required></el-input></el-form-item>
            <el-form-item label="Password"><el-input v-model="login.password" type="password" required></el-input></el-form-item>
            <el-form-item><el-button type="primary" native-type="submit" @click="onLogin">Login</el-button></el-form-item>
          </el-form>
        </el-col>
      </el-row>
    </div>
    <div v-else-if="activeView === 'releases'">
      <el-table :data="releases" stripe style="width: 100%">
        <el-table-column prop="name" label="Project"></el-table-column>
        <el-table-column prop="release" label="Release"></el-table-column>
        <el-table-column prop="published" label="Published"></el-table-column>
      </el-table>
    </div>
    <div v-else-if="activeView === 'projects'">
      <el-table :data="projects" stripe style="width: 100%">
        <el-table-column prop="name" label="Project"></el-table-column>
        <el-table-column prop="release" label="Latest Release"></el-table-column>
        <el-table-column prop="published" label="Published"></el-table-column>
        <el-table-column label="">
          <template slot-scope="scope">
            <el-button @click="" type="text" size="small">Edit</el-button>
            <el-button type="text" size="small">Disable</el-button>
          </template></el-table-column>
      </el-table>
    </div>
    <div v-else-if="activeView === 'profile'">
      <el-row type="flex" class="row-bg" justify="center">
        <el-col :span="10">
          <el-form ref="form" label-width="120px" @submit.native.prevent>
            <el-form-item label="Email" :rules="[
              { required: true, message: 'Please input email address', trigger: 'blur' },
              { type: 'email', message: 'Please input correct email address', trigger: ['blur', 'change'] }]"><el-input v-model="profile.email" type="email"></el-input></el-form-item>
            <el-form-item label="Github token" description="fooobar">
              <el-input v-model="profile.githubToken"></el-input>
              <a href="https://github.com/settings/tokens/new?description=ReleaseBell" target="_blank">Generate a GitHub API token</a>
            </el-form-item>
            <el-form-item><el-button type="primary" native-type="submit" @click="onProfileSubmit">Save</el-button></el-form-item>
          </el-form>
        </el-col>
      </el-row>
    </div>
    <div v-else>
      <center><h1><i class="el-icon-loading"></i></h1></center>
    </div>
  </el-main>
  <el-footer style="height: 24px">Built by the <a href="https://cloudron.io" target="_blank">Cloudron.io</a> team</el-footer>
</el-container>

<script src="/js/index.js"></script>

</body>
</html>
